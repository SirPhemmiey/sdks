"use strict";var T=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var I=Object.prototype.hasOwnProperty;var k=(i,s)=>{for(var t in s)T(i,t,{get:s[t],enumerable:!0})},R=(i,s,t,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let o of A(s))!I.call(i,o)&&o!==t&&T(i,o,{get:()=>s[o],enumerable:!(r=y(s,o))||r.enumerable});return i};var W=i=>R(T({},"__esModule",{value:!0}),i);var U={};k(U,{Onvo:()=>O,Table:()=>v,default:()=>q});module.exports=W(U);var e=class{#s;endpoint;async fetchBase(s,t,r,o){try{let n={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"};this.#s&&this.#s.trim()!==""&&(n["x-api-key"]=this.#s),o||(n["Content-Type"]="application/json");let E=await fetch(this.endpoint+s,{method:t||"GET",headers:n,body:o?r:r?JSON.stringify(r):void 0});if(!E.ok){let S=await E.text();throw new Error(S)}return await E.json()}catch(n){throw new Error("Error in making the request: "+n.message)}}async fetchBlob(s){try{let t={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"};return this.#s&&this.#s.trim()!==""&&(t["x-api-key"]=this.#s),await fetch(this.endpoint+s,{method:"GET",headers:t}).then(o=>o.blob())}catch(t){throw new Error("Error in making the request: "+t.message)}}constructor(s,t){if(s==null)throw new Error("API key is required");this.#s=s,this.endpoint=t?.endpoint||"https://dashboard.onvo.ai"}};var d=class extends e{list(){return this.fetchBase("/api/accounts")}get(s){return this.fetchBase("/api/accounts/"+s)}};var u=class extends e{list(){return this.fetchBase("/api/teams")}get(s){return this.fetchBase("/api/teams/"+s)}update(s,t){return this.fetchBase("/api/teams/"+s,"POST",t)}};var m=class extends e{list(){return this.fetchBase("/api/embed-users")}get(s){return this.fetchBase("/api/embed-users/"+s)}delete(s){return this.fetchBase("/api/embed-users/"+s,"DELETE")}upsert(s,t){return this.fetchBase("/api/embed-users","POST",{id:s,name:t.name,email:t.email,metadata:t.metadata})}};var c=class extends e{list(){return this.fetchBase("/api/datasources")}get(s){return this.fetchBase("/api/datasources/"+s)}delete(s){return this.fetchBase("/api/datasources/"+s,"DELETE")}update(s,t){return this.fetchBase("/api/datasources/"+s,"POST",t)}create(s){return this.fetchBase("/api/datasources","PUT",s)}};var h=class extends e{list(){return this.fetchBase("/api/automations")}get(s){return this.fetchBase("/api/automations/"+s)}delete(s){return this.fetchBase("/api/automations/"+s,"DELETE")}update(s,t){return this.fetchBase("/api/automations/"+s,"POST",t)}create(s){return this.fetchBase("/api/automations","PUT",s)}};var p=class extends e{list(){return this.fetchBase("/api/dashboards")}get(s){return this.fetchBase("/api/dashboards/"+s)}delete(s){return this.fetchBase("/api/dashboards/"+s,"DELETE")}update(s,t){return this.fetchBase("/api/dashboards/"+s,"POST",t)}create(s){return this.fetchBase("/api/dashboards","PUT",s)}};var g=class extends e{#s;constructor(s,t,r){super(t,r),this.#s=s}list(){return this.fetchBase("/api/dashboards/"+this.#s+"/datasources")}unlink(s){return this.fetchBase("/api/dashboards/"+this.#s+"/datasources/"+s,"DELETE")}link(s){return this.fetchBase("/api/dashboards/"+this.#s+"/datasources","PUT",{datasourceId:s})}};var b=class extends e{datasources;#s;constructor(s,t,r){super(t,r),this.#s=s,this.datasources=new g(s,t,r)}updateWidgetCache(){return this.fetchBase("/api/dashboards/"+this.#s+"/update-cache","POST")}getWidgetSuggestions(){return this.fetchBase("/api/dashboards/"+this.#s+"/widget-suggestions")}export(s){return this.fetchBlob("/api/dashboards/"+this.#s+"/export?format="+s)}};var l=class extends e{#s;constructor(s,t,r){super(t,r),this.#s=s}getAccessToken(){return this.fetchBase("/api/embed-users/"+this.#s+"/token")}};var f=class extends e{#s;constructor(s,t,r){super(t,r),this.#s=s}initialize(){return this.fetchBase("/api/datasources/"+this.#s+"/initialize")}uploadFile(s){let t=new FormData;return t.set("file",s),this.fetchBase("/api/datasources/"+this.#s+"/upload-file","POST",t,!0)}};var P=class extends e{list(s){return this.fetchBase("/api/questions?dashboard="+s.dashboard)}create(s){return this.fetchBase("/api/questions","POST",{dashboard:s.dashboardId,id:s.questionId||void 0,messages:s.messages})}delete(s){return this.fetchBase("/api/questions/"+s,"DELETE")}update(s,t){return this.fetchBase("/api/questions/"+s,"POST",t)}};var x=class extends e{#s;constructor(s,t,r){super(t,r),this.#s=s}getRuns(){return this.fetchBase("/api/automations/"+this.#s+"/runs")}};var w=class extends e{#s;constructor(s,t,r){super(t,r),this.#s=s}export(s){return this.fetchBlob("/api/widgets/"+this.#s+"/export?format="+s)}updatePrompts(s){return this.fetchBase("/api/widgets/"+this.#s,"PATCH",{messages:s})}executeCode(s){return this.fetchBase("/api/widgets/"+this.#s+"/execute-code","POST",{code:s})}};var D=class extends e{list(s){return this.fetchBase("/api/sessions?parent_dashboard="+s.parent_dashboard)}get(s){return this.fetchBase("/api/sessions?dashboard="+s.dashboard)}revoke(s){return this.fetchBase("/api/sessions?dashboard="+s.dashboard,"DELETE")}revokeAll(s){return this.fetchBase("/api/sessions?parent_dashboard="+s.parent_dashboard,"DELETE")}async upsert({embed_user:s,parent_dashboard:t,parameters:r}){return await this.fetchBase("/api/sessions","POST",{user:s,parameters:r,dashboard:t})}};var B=class extends e{list(s){return this.fetchBase("/api/widgets?dashboard="+s.dashboard)}get(s){return this.fetchBase("/api/widgets/"+s)}delete(s){return this.fetchBase("/api/widgets/"+s,"DELETE")}update(s,t){return this.fetchBase("/api/widgets/"+s,"POST",t)}create(s){return this.fetchBase("/api/widgets","PUT",s)}};var _=class extends e{#s;constructor(s,t,r){super(t,r),this.#s=s}export(s,t){return this.fetchBlob(`/api/questions/${this.#s}/export?format=${t}&messageIndex=${s}`)}};var v=(a=>(a.Countries="countries",a.Invites="invites",a.ItineraryInvites="itinerary_invites",a.Itineraries="itineraries",a.Members="members",a.Teams="teams",a.Travelers="travelers",a.Accounts="accounts",a.DataSources="datasources",a.EmbedUsers="embed_users",a.APIKeys="api_keys",a.Widgets="widgets",a.Dashboards="dashboards",a.DashboardDatasources="dashboard_datasources",a.Sessions="sessions",a.Questions="questions",a.Integrations="integrations",a.DecryptedIntegrations="decrypted_integrations",a.DecryptedSessions="decrypted_sessions",a.DecryptedWidgets="decrypted_widgets",a.DecryptedDatasources="decrypted_datasources",a.Subscriptions="subscriptions",a.SubscriptionPlans="subscription_plans",a.Automations="automations",a.AutomationRuns="automation_runs",a.Logs="logs",a))(v||{});var O=class extends e{accounts;teams;embed_users;datasources;automations;dashboards;questions;widgets;sessions;automation;dashboard;embed_user;datasource;widget;question;constructor(s,t){super(s,t),this.accounts=new d(s,t),this.teams=new u(s,t),this.embed_users=new m(s,t),this.datasources=new c(s,t),this.automations=new h(s,t),this.dashboards=new p(s,t),this.questions=new P(s,t),this.sessions=new D(s,t),this.widgets=new B(s,t),this.dashboard=r=>new b(r,s,t),this.embed_user=r=>new l(r,s,t),this.datasource=r=>new f(r,s,t),this.automation=r=>new x(r,s,t),this.widget=r=>new w(r,s,t),this.question=r=>new _(r,s,t)}},q=O;0&&(module.exports={Onvo,Table});
//# sourceMappingURL=index.js.map