"use strict";var O=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var W=(o,s)=>{for(var e in s)O(o,e,{get:s[e],enumerable:!0})},I=(o,s,e,r)=>{if(s&&typeof s=="object"||typeof s=="function")for(let i of A(s))!k.call(o,i)&&i!==e&&O(o,i,{get:()=>s[i],enumerable:!(r=v(s,i))||r.enumerable});return o};var R=o=>I(O({},"__esModule",{value:!0}),o);var q={};W(q,{Onvo:()=>E,Table:()=>y,default:()=>U});module.exports=R(q);var t=class{#s;endpoint;async fetchBase(s,e,r,i){try{let n={"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"};this.#s&&this.#s.trim()!==""&&(n["x-api-key"]=this.#s),i||(n["Content-Type"]="application/json");let S=await fetch(this.endpoint+s,{method:e||"GET",headers:n,body:i?r:r?JSON.stringify(r):void 0});if(!S.ok){let T=await S.text();throw new Error(T)}return await S.json()}catch(n){throw new Error("Error in making the request: "+n.message)}}async fetchBlob(s){try{let e={"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS"};return this.#s&&this.#s.trim()!==""&&(e["x-api-key"]=this.#s),await fetch(this.endpoint+s,{method:"GET",headers:e}).then(i=>i.blob())}catch(e){throw new Error("Error in making the request: "+e.message)}}constructor(s,e){if(s==null)throw new Error("API key is required");this.#s=s,this.endpoint=e?.endpoint||"https://dashboard.onvo.ai"}};var d=class extends t{list(){return this.fetchBase("/api/accounts")}get(s){return this.fetchBase("/api/accounts/"+s)}};var m=class extends t{list(){return this.fetchBase("/api/teams")}get(s){return this.fetchBase("/api/teams/"+s)}update(s,e){return this.fetchBase("/api/teams/"+s,"POST",e)}};var u=class extends t{list(){return this.fetchBase("/api/embed-users")}get(s){return this.fetchBase("/api/embed-users/"+s)}delete(s){return this.fetchBase("/api/embed-users/"+s,"DELETE")}upsert(s,e){return this.fetchBase("/api/embed-users","POST",{id:s,name:e.name,email:e.email,metadata:e.metadata})}};var c=class extends t{list(){return this.fetchBase("/api/datasources")}get(s){return this.fetchBase("/api/datasources/"+s)}delete(s){return this.fetchBase("/api/datasources/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/datasources/"+s,"POST",e)}create(s){return this.fetchBase("/api/datasources","PUT",s)}};var h=class extends t{list(){return this.fetchBase("/api/automations")}get(s){return this.fetchBase("/api/automations/"+s)}delete(s){return this.fetchBase("/api/automations/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/automations/"+s,"POST",e)}create(s){return this.fetchBase("/api/automations","PUT",s)}};var p=class extends t{list(){return this.fetchBase("/api/dashboards")}get(s){return this.fetchBase("/api/dashboards/"+s)}delete(s){return this.fetchBase("/api/dashboards/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/dashboards/"+s,"POST",e)}create(s){return this.fetchBase("/api/dashboards","PUT",s)}};var g=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}list(){return this.fetchBase("/api/dashboards/"+this.#s+"/datasources")}unlink(s){return this.fetchBase("/api/dashboards/"+this.#s+"/datasources/"+s,"DELETE")}link(s){return this.fetchBase("/api/dashboards/"+this.#s+"/datasources","PUT",{datasourceId:s})}};var b=class extends t{datasources;#s;constructor(s,e,r){super(e,r),this.#s=s,this.datasources=new g(s,e,r)}updateWidgetCache(){return this.fetchBase("/api/dashboards/"+this.#s+"/update-cache","POST")}getWidgetSuggestions(){return this.fetchBase("/api/dashboards/"+this.#s+"/widget-suggestions")}export(s){return this.fetchBlob("/api/dashboards/"+this.#s+"/export?format="+s)}};var l=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}getAccessToken(){return this.fetchBase("/api/embed-users/"+this.#s+"/token")}};var P=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}initialize(){return this.fetchBase("/api/datasources/"+this.#s+"/initialize")}uploadFile(s){let e=new FormData;return e.set("file",s),this.fetchBase("/api/datasources/"+this.#s+"/upload-file","POST",e,!0)}};var f=class extends t{list(s){return this.fetchBase("/api/questions?dashboard="+s.dashboard)}create(s){return this.fetchBase("/api/questions","POST",{dashboard:s.dashboardId,id:s.questionId||void 0,messages:s.messages})}delete(s){return this.fetchBase("/api/questions/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/questions/"+s,"POST",e)}};var D=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}getRuns(){return this.fetchBase("/api/automations/"+this.#s+"/runs")}};var x=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}export(s){return this.fetchBlob("/api/widgets/"+this.#s+"/export?format="+s)}updatePrompts(s){return this.fetchBase("/api/widgets/"+this.#s,"PATCH",{messages:s})}executeCode(s){return this.fetchBase("/api/widgets/"+this.#s+"/execute-code","POST",{code:s})}};var w=class extends t{list(s){return this.fetchBase("/api/sessions?parent_dashboard="+s.parent_dashboard)}get(s){return this.fetchBase("/api/sessions?dashboard="+s.dashboard)}revoke(s){return this.fetchBase("/api/sessions?dashboard="+s.dashboard,"DELETE")}revokeAll(s){return this.fetchBase("/api/sessions?parent_dashboard="+s.parent_dashboard,"DELETE")}async upsert({embed_user:s,parent_dashboard:e,parameters:r}){return await this.fetchBase("/api/sessions","POST",{user:s,parameters:r,dashboard:e})}};var B=class extends t{list(s){return this.fetchBase("/api/widgets?dashboard="+s.dashboard)}get(s){return this.fetchBase("/api/widgets/"+s)}delete(s){return this.fetchBase("/api/widgets/"+s,"DELETE")}update(s,e){return this.fetchBase("/api/widgets/"+s,"POST",e)}create(s){return this.fetchBase("/api/widgets","PUT",s)}};var _=class extends t{#s;constructor(s,e,r){super(e,r),this.#s=s}export(s,e){return this.fetchBlob(`/api/questions/${this.#s}/export?format=${e}&messageIndex=${s}`)}};var y=(a=>(a.Countries="countries",a.Invites="invites",a.ItineraryInvites="itinerary_invites",a.Itineraries="itineraries",a.Members="members",a.Teams="teams",a.Travelers="travelers",a.Accounts="accounts",a.DataSources="datasources",a.EmbedUsers="embed_users",a.APIKeys="api_keys",a.Widgets="widgets",a.Dashboards="dashboards",a.DashboardDatasources="dashboard_datasources",a.Sessions="sessions",a.Questions="questions",a.Integrations="integrations",a.DecryptedIntegrations="decrypted_integrations",a.DecryptedSessions="decrypted_sessions",a.DecryptedWidgets="decrypted_widgets",a.DecryptedDatasources="decrypted_datasources",a.Subscriptions="subscriptions",a.SubscriptionPlans="subscription_plans",a.Automations="automations",a.AutomationRuns="automation_runs",a.Logs="logs",a))(y||{});var E=class extends t{accounts;teams;embed_users;datasources;automations;dashboards;questions;widgets;sessions;automation;dashboard;embed_user;datasource;widget;question;constructor(s,e){super(s,e),this.accounts=new d(s,e),this.teams=new m(s,e),this.embed_users=new u(s,e),this.datasources=new c(s,e),this.automations=new h(s,e),this.dashboards=new p(s,e),this.questions=new f(s,e),this.sessions=new w(s,e),this.widgets=new B(s,e),this.dashboard=r=>new b(r,s,e),this.embed_user=r=>new l(r,s,e),this.datasource=r=>new P(r,s,e),this.automation=r=>new D(r,s,e),this.widget=r=>new x(r,s,e),this.question=r=>new _(r,s,e)}},U=E;0&&(module.exports={Onvo,Table});
//# sourceMappingURL=index.js.map